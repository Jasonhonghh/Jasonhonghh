name: Update README with WeRead
on:
  schedule:
    # Runs at 18:00 UTC (02:00 CST) every day
    - cron: '0 18 * * *'
  workflow_dispatch:

jobs:
  update-readme:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Update README with WeRead
        uses: zhaohongxuan/weread-action@v1.2.8
        with:
          # 微信读书的 Cookie，需要设置为仓库的 Secret
          cookie: ${{ secrets.WEREAD_COOKIE }}
          # 你的 GitHub Token，用于提交代码
          gh_token: ${{ secrets.GITHUB_TOKEN }}
          # 标记 README 中需要替换内容的位置
          weread_token: weread
          # 显示的书籍数量
          book_num: 3